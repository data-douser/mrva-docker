{{/*
Secret containing sensitive credentials for all MRVA components.
Note: In production, consider using external secrets management (e.g., Vault, AWS Secrets Manager).
*/}}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "codeql-mrva-chart.secretName" . }}
  labels:
    {{- include "codeql-mrva-chart.labels" . | nindent 4 }}
  {{- with .Values.global.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
type: Opaque
data:
  # PostgreSQL password (base64 encoded)
  POSTGRES_PASSWORD: {{ .Values.postgres.auth.password | b64enc | quote }}
  # RabbitMQ password (base64 encoded)
  RABBITMQ_PASSWORD: {{ .Values.rabbitmq.auth.password | b64enc | quote }}
  # MinIO root password (base64 encoded)
  MINIO_ROOT_PASSWORD: {{ .Values.minio.rootPassword | b64enc | quote }}
  {{- if .Values.codeServer.enabled }}
  # Code-server password (base64 encoded)
  CODE_SERVER_PASSWORD: {{ .Values.codeServer.password | b64enc | quote }}
  {{- end }}
